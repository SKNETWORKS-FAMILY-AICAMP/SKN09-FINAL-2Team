{% load static %}
<link rel="stylesheet" href="{% static 'css/sidebar.css' %}">
<div class="sidebar mini" id="sidebar">
  <!-- 상단 헤더 (브랜드/토글) -->
  <div class="sidebar-header">
    <img src="{% static 'images/top_logo.png' %}" alt="Senpick Logo" class="logo-img">
    <button class="menu-btn" id="sidebar-toggle-btn" title="사이드바 접기">
      <img src="{% static 'images/sidebar_toggle.png' %}" alt="사이드바 토글">
    </button>
  </div>
  <!-- 메인: 검색, New Chat, Chat, 채팅리스트 -->
  <div class="sidebar-main">
    <div class="search-row" id="sidebar-search-row">
      <img src="{% static 'images/search.png' %}" alt="검색">
      <input type="text" placeholder="검색어를 입력해주세요.">
    </div>
    <div class="menu-btn-row" id="newchat-btn">
      <img src="{% static 'images/plus.png' %}" alt="새 채팅">
      <span class="btn-label">New Chat</span>
    </div>
    <div class="menu-btn-row selected" id="chat-btn">
      <img src="{% static 'images/chat_logo.png' %}" alt="Chat">
      <span class="btn-label">Chat</span>
    </div>
    <ul class="chat-list">
    
    </ul>
  </div>
  <!-- 하단: 마이페이지/브랜드바 -->
  <div class="sidebar-bottom">
    <div class="mypage-row">
      <img src="{% static 'images/Settings.png' %}" alt="설정">
      <span>My Page</span>
    </div>
    <div class="brand-bar">
      <img src="{% static 'images/bottom_logo.png' %}" alt="Brand" class="brand-logo">
      <span class="brand-label">유지니어스</span>
      <a href="#" class="brand-link">
        <img src="{% static 'images/Log_out.png' %}" alt="로그아웃">
      </a>
    </div>
  </div>
</div>
<script>
    const chatlist = ["글자몇개를넣으면좋을까요","공백포함11글자가능하다","귀엽고 실용적인 친구 선물"]      
      
    
  // 접힘/펼침 상태 관리
  const sidebar = document.getElementById('sidebar');
  const toggleBtn = document.getElementById('sidebar-toggle-btn');
  const searchRow = document.getElementById('sidebar-search-row');
  const chathistory = document.querySelector('.chat-list');
  chathistory.append(...chatlist.map(chat => {
    const li = document.createElement('li');
    li.textContent = chat;
    return li;
  }));
  function showToggleIfOpen() {
    if (sidebar.classList.contains('mini')) {
      toggleBtn.style.display = 'none';
    } else {
      toggleBtn.style.display = '';
    }
  }
  showToggleIfOpen();
  document.querySelector('.logo-img').addEventListener('click', function() {
    if (sidebar.classList.contains('mini')) {
      sidebar.classList.remove('mini');
      showToggleIfOpen();
    }
  });
  searchRow.addEventListener('click', function() {
    if (sidebar.classList.contains('mini')) {
      sidebar.classList.remove('mini');
      showToggleIfOpen();
    }
  });
  toggleBtn.addEventListener('click', function(e) {
    e.stopPropagation();
    sidebar.classList.add('mini');
    showToggleIfOpen();
  });
  const observer = new MutationObserver(showToggleIfOpen);
  observer.observe(sidebar, { attributes: true, attributeFilter: ['class'] });
</script>


